#include "Joints.h"
extern sControl* pC;
const double FricTabDefaultJoint0[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
const double FricTabDefaultJoint1[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
const double FricTabDefaultJoint2[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
const double FricTabDefaultJoint3[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
const double FricTabDefaultJoint4[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
const double FricTabDefaultJoint5[] = {-0.81571,-0.7292939473684211,-0.6428778947368422,-0.5564618421052632,-0.4700457894736843,-0.3836297368421054,-0.2972136842105264,-0.2107976315789475,-0.12438157894736857,-0.037965526315789644,0.04845052631578928,0.1348665789473682,0.22128263157894723,0.30769868421052615,0.3941147368421051,0.480530789473684,0.5669468421052629,0.6533628947368418,0.7397789473684208,0.8261949999999997,20.,21.219263157894737,22.438526315789474,23.65778947368421,24.877052631578948,26.096315789473685,27.31557894736842,28.534842105263156,29.754105263157893,30.97336842105263,32.19263157894737,33.4118947368421,34.63115789473684,35.850421052631575,37.06968421052631,38.28894736842105,39.508210526315786,40.72747368421052,41.94673684210526,43.166,-43.39838393343234,-34.890974186561834,-28.430295629500506,-23.599179891163658,-20.05110137160318,-17.49623205147509,-15.690987152964226,-14.430571163435161,-13.544033733080141,-12.891344957928595,-12.36199955947086,-11.87465947214514,-11.37734435015227,-10.847679504720873,-10.292710783174698,-9.747795901137579,-9.274081739247777,-8.95407711538428,-8.884830544091528,-9.168222494299698,-25.773741396485093,-21.06648079091474,-17.67262651459714,-15.296007954687411,-13.698399315139795,-12.685937606667721,-12.099015033782052,-11.805155290256153,-11.694383274276333,-11.676597734602183,-11.680456359041273,-11.653282816463616,-11.561505263798608,-11.391135829180712,-11.147800582562923,-10.855829505202564,-10.55591596915474,-10.300855238252552,-10.148871501696703,-10.154042951609881,-16.046945358684752,-13.639858366232602,-12.012186297853987,-10.96316956769624,-10.339771766818558,-10.023453148527551,-9.920402056510284,-9.954733807071534,-10.064166536662015,-10.197683526217588,-10.314691513354774,-10.385184503913479,-10.390422594045958,-10.323635314198327,-10.190259006230917,-10.007217745034723,-9.800757315970259,-9.602341759222327,-9.442121992724424,-9.339486024560756,-11.482842988287757,-10.377820047194746,-9.676764703433946,-9.25137972171342,-9.013055373112365,-8.899990730787067,-8.867756454095797,-8.882808572559952,-8.918462780757181,-8.952838755709308,-8.968284007834882,-8.95178677685908,-8.895887484010018,-8.799598251753196,-8.668840002388606,-8.515906646734948,-8.357465874352783,-8.210606056418328,-8.08643877277791,-7.980766474152915,-9.748180715194394,-9.322151349998421,-9.049461033794614,-8.854055499076821,-8.693427938507739,-8.546080425901891,-8.402410371327278,-8.25853152169293,-8.112539017991367,-7.9627280206477735,-7.807275414168544,-7.644894102395483,-7.475969405735668,-7.303687071605964,-7.134662409385783,-6.97858006115348,-6.846353919747344,-6.746316704906349,-6.677948709519114,-6.622655226528877,-9.052683345149944,-8.949219389097834,-8.845552857972507,-8.70047360184617,-8.50178416403105,-8.254093642281077,-7.970020129820114,-7.664311247497608,-7.350392278311119,-7.038851415680256,-6.737371636725584,-6.451618711806077,-6.186594861726917,-5.9479675738475635,-5.742883088307281,-5.579774065852689,-5.466670948488172,-5.4075265240244335,-5.39606320632447,-5.406652542020311,-8.202816104369504,-8.241937282020444,-8.201592145665018,-8.060927584190722,-7.824883347015202,-7.512310660466937,-7.14748296966718,-6.754508317206273,-6.354152869886093,-5.962585104862228,-5.591550166511297,-5.249483905157831,-4.943076109277172,-4.678792442053236,-4.463864594075858,-4.30625816293832,-4.213127771552536,-4.187268936126202,-4.221076195171918,-4.287517011049204,-6.582413122456728,-6.688367250213105,-6.690912355034925,-6.578068296194033,-6.36145254994608,-6.064715896067355,-5.715353775502081,-5.33940283051561,-4.958532138603914,-4.589038651452938,-4.242256350300522,-3.9258886288735084,-3.6457734153846104,-3.407590544753475,-3.218020892330969,-3.0848667805876175,-3.0156431698123924,-3.0141491444810526,-3.0745292061110376,-3.1723338843657984,-4.0743558616140945,-4.221145923841959,-4.279729982165918,-4.2386110470079075,-4.108428746379104,-3.9107043974763656,-3.6699452950633713,-3.4086177280423726,-3.144498235476931,-2.889912613278284,-2.6523721830599243,-2.4361168341565644,-2.2440743504812417,-2.079745533184905,-1.9485246305157489,-1.8579645863828773,-1.8164966185759113,-1.830113638243347,-1.8965270216795034,-1.9963062460228684,-0.9374850000122024,-1.1119153584736523,-1.2380240800785032,-1.299592995273997,-1.3015234517879435,-1.258883086212336,-1.1892953580845642,-1.1081813578184665,-1.0263633997401485,-0.9495399115276086,-0.8791411314250581,-0.8140751243554405,-0.7528736284839397,-0.6957472433314251,-0.6460594707350538,-0.6107291201878979,-0.5990705894837447,-0.6195815323371789,-0.6741874240688048,-0.7494525365909794,2.3470707226897503,2.165056728410491,1.9806227446970297,1.8166357252148373,1.6757066526351991,1.5508497520977471,1.432815396499791,1.3145871922606602,1.1935337343256833,1.0717055190289102,0.9547675036046712,0.8500578009879973,0.7642629986221436,0.7012005899596261,0.6601990074195783,0.6355657454405446,0.6176340622951102,0.5958787494746502,0.5645914572960464,0.5316060653713066,5.2459651897702315,5.085883993150219,4.876038350117597,4.644503636728587,4.40009959533927,4.142763218183063,3.870611777074373,3.5841864879475906,3.2883672989119077,2.992449290537479,2.7088711770611553,2.4510863972718653,2.231067283639277,2.056932798546768,1.9311903262205306,1.8500820091758214,1.804526117612113,1.7831439408837468,1.7778626892904867,1.7925848952727392,7.345921613884457,7.232512265951755,7.041146583238515,6.80020879771746,6.520254981016478,6.204107283160738,5.853654771768561,5.47385136038065,5.074401314685019,4.66962282521672,4.27698013536974,3.914774713361112,3.59948595681999,3.3432519187190337,3.15198054344728,3.024581901529018,2.953811911873345,2.9292180401680525,2.9426774621388176,2.997018180314626,8.514051757574634,8.436430607311195,8.290140803503164,8.095425423928646,7.856844340479256,7.573097498135212,7.243571248698572,6.872098227999231,6.468421265275538,6.047851813436864,5.629613388868165,5.2343605095666135,4.8813636202139605,4.58585049292742,4.356994592402771,4.197040894156089,4.1020596444941475,4.064818551036296,4.0802638923269114,4.154101035470376,9.032024159912453,8.896459112879256,8.76096189677628,8.625542742546713,8.477681455877246,8.30188742143855,8.085999116225139,7.8247136206755386,7.520836616313318,7.184743358566266,6.832541113464686,6.4834235470079875,6.15670755573592,5.869043027378211,5.632286020168976,5.45252584958871,5.3307565711547795,5.265683348137827,5.259154192601272,5.324707568819576,9.689897861371719,9.256429958850276,8.977897272205155,8.8182525715074,8.733369153393141,8.680345255656903,8.62356443522367,8.538002398268873,8.410270771149953,8.23788830084959,8.027269973625152,7.790924540655396,7.544350939195283,7.3031240981399606,7.080660616575187,6.887154804098827,6.730175571512518,6.617414660664508,6.562076702110062,6.591401589401357,11.8254381189563,10.62857817991835,9.860117333952985,9.42830211592809,9.239339055360688,9.206451186380036,9.255706975456633,9.329112155510302,9.385454955237947,9.39939521220549,9.359287858544121,9.264231267872674,9.120830952135293,8.940169097139005,8.73547042539576,8.520954875089956,8.312367583588639,8.12967666475015,8.002429268017295,7.978256408656307,17.294730603677635,14.54845867188169,12.6619659198941,11.46422847386657,10.79010078398187,10.489131914877362,10.431170708112404,10.509250305403839,10.640242521334585,10.763772554219031,10.839884523822548,10.84594832471339,10.773298283755139,10.624094110728038,10.408894630476425,10.145434785546968,9.859096397798567,9.585563177875883,9.376150471100118,9.306300228505279,28.359910572439276,22.84720591096402,18.830821199303955,16.03289134332772,14.19151710866845,13.069348876648291,12.458975726569406,12.185610333110162,12.107560167482006,12.114975491125733,12.127364630508964,12.090367021937709,11.97227451483559,11.760791422373586,11.460523808134894,11.091688497421273,10.69053230190184,10.311951946503541,10.034805186987796,9.97040360703977,47.47982350639586,37.42695288190407,29.768343521649967,24.087620422702457,19.996921529035717,17.14525663798122,15.223688087445225,13.96782371246627,13.158112559940491,12.618433850129804,12.213469673668442,11.845351912845217,11.450073875716043,10.99415713189228,10.472064038647659,9.90484644595199,9.340521069421811,8.856662019436044,8.56570097556687,8.623425494784897};
void Joints_FindMinMaxVelTempInFrictionTabeIdx(void)
{
	for(int num=0;num<JOINTS_MAX;num++)
	{
		//Znajdowanie wartosci minimalnych i maksymalnych predkosci i temperatury, dla ktorych okreslono moment tarcia
		pC->Joints[num].fricTableVelMin = pC->Joints[num].fricTableVelIdx[0];
		pC->Joints[num].fricTableVelMax = pC->Joints[num].fricTableVelIdx[0];
		pC->Joints[num].fricTableTempMin = pC->Joints[num].fricTableTempIdx[0];
		pC->Joints[num].fricTableTempMax = pC->Joints[num].fricTableTempIdx[0];
		
		for(int i=0;i<JOINTS_FRICTABVELSIZE;i++)
		{
			if(pC->Joints[num].fricTableVelIdx[i] < pC->Joints[num].fricTableVelMin)
				pC->Joints[num].fricTableVelMin = pC->Joints[num].fricTableVelIdx[i];
			
			if(pC->Joints[num].fricTableVelIdx[i] > pC->Joints[num].fricTableVelMax)
				pC->Joints[num].fricTableVelMax = pC->Joints[num].fricTableVelIdx[i];
		}
		
		for(int i=0;i<JOINTS_FRICTABTEMPSIZE;i++)
		{
			if(pC->Joints[num].fricTableTempIdx[i] < pC->Joints[num].fricTableTempMin)
				pC->Joints[num].fricTableTempMin = pC->Joints[num].fricTableTempIdx[i];
			
			if(pC->Joints[num].fricTableTempIdx[i] > pC->Joints[num].fricTableTempMax)
				pC->Joints[num].fricTableTempMax = pC->Joints[num].fricTableTempIdx[i];
		}
	}
}
static void Joints_SetDefaultFrictionTable(void)
{
	const	double* FricTableJoints[JOINTS_MAX] = {FricTabDefaultJoint0, FricTabDefaultJoint1, FricTabDefaultJoint2, FricTabDefaultJoint3, FricTabDefaultJoint4, FricTabDefaultJoint5};
	for(int num=0;num<JOINTS_MAX;num++)
	{
		uint32_t idx = 0;
		
		for(int i=0;i<JOINTS_FRICTABVELSIZE;i++)
			pC->Joints[num].fricTableVelIdx[i] = FricTableJoints[num][idx++];
		
		for(int i=0;i<JOINTS_FRICTABTEMPSIZE;i++)
			pC->Joints[num].fricTableTempIdx[i] = FricTableJoints[num][idx++];
		
		for(int i=0;i<JOINTS_FRICTABVELSIZE;i++)
			for(int j=0;j<JOINTS_FRICTABTEMPSIZE;j++)
				pC->Joints[num].fricTable[i][j] = FricTableJoints[num][idx++];
	}
	Joints_FindMinMaxVelTempInFrictionTabeIdx();
}
static void Joints_SetDefaultFrictionPolynomial(void)
{
	//J1
	pC->Joints[0].fricCoeff[0] = 8.3511;
	pC->Joints[0].fricCoeff[1] = 49.0592;
	pC->Joints[0].fricCoeff[2] = -33.8717;
	pC->Joints[0].fricCoeff[3] = 14.5622;
	pC->Joints[0].fricCoeff[4] = -0.016903;
	pC->Joints[0].fricCoeff[5] = 14.01489;
	
	pC->Joints[1].fricCoeff[0] = 6.524288;
	pC->Joints[1].fricCoeff[1] = 46.54229369287933;
	pC->Joints[1].fricCoeff[2] = -37.98456500960326;
	pC->Joints[1].fricCoeff[3] = 21.0199476124962;
	pC->Joints[1].fricCoeff[4] = -0.027194946468284284;
	pC->Joints[1].fricCoeff[5] = 19.88786510460206;
	
	pC->Joints[2].fricCoeff[0] = 5.906889543057651;
	pC->Joints[2].fricCoeff[1] = 46.74362364518938;
	pC->Joints[2].fricCoeff[2] = -51.63074061579354;
	pC->Joints[2].fricCoeff[3] = 37.849346936033356;
	pC->Joints[2].fricCoeff[4] = -0.02898496744241571;
	pC->Joints[2].fricCoeff[5] = 24.734728760729638;
	
	pC->Joints[3].fricCoeff[0] = 2.6687306340217645;
	pC->Joints[3].fricCoeff[1] = 12.573326515302712;
	pC->Joints[3].fricCoeff[2] = -3.716488061498839;
	pC->Joints[3].fricCoeff[3] = -0.6543677283056056;
	pC->Joints[3].fricCoeff[4] = -0.023931660300091872;
	pC->Joints[3].fricCoeff[5] = 25.619160826675138;
	
	pC->Joints[4].fricCoeff[0] = 2.888895376338052;
	pC->Joints[4].fricCoeff[1] = 18.96976439814303;
	pC->Joints[4].fricCoeff[2] = -22.293583023278945;
	pC->Joints[4].fricCoeff[3] = 16.941868944179486;
	pC->Joints[4].fricCoeff[4] = -0.018687413997168847;
	pC->Joints[4].fricCoeff[5] = 31.076305032122963;
	
	pC->Joints[5].fricCoeff[0] = 3.0290731310886185;
	pC->Joints[5].fricCoeff[1] = 21.98125488265331;
	pC->Joints[5].fricCoeff[2] = -20.186097814102737;
	pC->Joints[5].fricCoeff[3] = 12.648620008379257;
	pC->Joints[5].fricCoeff[4] = -0.02301637403516809;
	pC->Joints[5].fricCoeff[5] = 19.112761551382018;
	
	//J2
//	pC->Joints[0].fricCoeff[0] = 3.7557695071018817;
//	pC->Joints[0].fricCoeff[1] = 32.88390062972518;
//	pC->Joints[0].fricCoeff[2] = -45.42756793785036;
//	pC->Joints[0].fricCoeff[3] = 36.71164726130435;
//	pC->Joints[0].fricCoeff[4] = -0.07448704781806412;
//	pC->Joints[0].fricCoeff[5] = 37.274508595534286;
//	
//	pC->Joints[1].fricCoeff[0] = 4.93588;
//	pC->Joints[1].fricCoeff[1] = 38.31554;
//	pC->Joints[1].fricCoeff[2] = -36.30966;
//	pC->Joints[1].fricCoeff[3] = 22.156883;
//	pC->Joints[1].fricCoeff[4] = -0.03728;
//	pC->Joints[1].fricCoeff[5] = 29.39539;
//	
//	pC->Joints[2].fricCoeff[0] = 5.121409854381762;
//	pC->Joints[2].fricCoeff[1] = 36.90630225186322;
//	pC->Joints[2].fricCoeff[2] = -33.77905899259529;
//	pC->Joints[2].fricCoeff[3] = 19.092281381375987;
//	pC->Joints[2].fricCoeff[4] = -0.03338800832321824;
//	pC->Joints[2].fricCoeff[5] = 28.75503460003772;
//	
//	pC->Joints[3].fricCoeff[0] = 3.634361182476341;
//	pC->Joints[3].fricCoeff[1] = 16.367108106695177;
//	pC->Joints[3].fricCoeff[2] = -7.535778971936864;
//	pC->Joints[3].fricCoeff[3] = 0.4903211032620818;
//	pC->Joints[3].fricCoeff[4] = -0.0376143000898514;
//	pC->Joints[3].fricCoeff[5] = 20.98337065936175;
//	
//	pC->Joints[4].fricCoeff[0] = 2.644900549836491;
//	pC->Joints[4].fricCoeff[1] = 13.470815934063692;
//	pC->Joints[4].fricCoeff[2] = -11.533519586705612;
//	pC->Joints[4].fricCoeff[3] = 6.1002408416911305;
//	pC->Joints[4].fricCoeff[4] = -0.03576808486611048;
//	pC->Joints[4].fricCoeff[5] = 18.98088635678911;
//	
//	pC->Joints[5].fricCoeff[0] = 2.4254685647398695;
//	pC->Joints[5].fricCoeff[1] = 15.749754158317014;
//	pC->Joints[5].fricCoeff[2] = -12.106454476243666;
//	pC->Joints[5].fricCoeff[3] = 5.493472586452902;
//	pC->Joints[5].fricCoeff[4] = -0.024242620835343617;
//	pC->Joints[5].fricCoeff[5] = 19.044821862593533;
}
void Joints_SetFrictionPolynomialFromCan(uint8_t num)
{
	for(int i=0;i<JOINTS_FRICCOEFFMAX;i++)
	{
		pC->Joints[num].fricCoeff[i] = pC->Joints[num].fricCoeffFromCan[i];
	}
}
void Joints_SetDefaultFriction(void)
{
	if(pC->Jtc.fricType == JTC_FT_Polynomial)
		Joints_SetDefaultFrictionPolynomial();
	else if(pC->Jtc.fricType == JTC_FT_Table)
		Joints_SetDefaultFrictionTable();
}
void Joints_SetDefaultPidParam(void)
{
	pC->Joints[0].pidKp = 8000.0;
	pC->Joints[0].pidKi = 14000.0;
	pC->Joints[0].pidKd = 160.0;
	pC->Joints[0].pidErrorIntMin = -120.0;
	pC->Joints[0].pidErrorIntMax = 120.0;
	
	pC->Joints[1].pidKp = 8000.0;
	pC->Joints[1].pidKi = 14000.0;
	pC->Joints[1].pidKd = 160.0;
	pC->Joints[1].pidErrorIntMin = -100.0;
	pC->Joints[1].pidErrorIntMax = 100.0;
	
	pC->Joints[2].pidKp = 8000.0;
	pC->Joints[2].pidKi = 14000.0;
	pC->Joints[2].pidKd = 160.0;
	pC->Joints[2].pidErrorIntMin = -80.0;
	pC->Joints[2].pidErrorIntMax = 80.0;
	
	pC->Joints[3].pidKp = 4000.0;
	pC->Joints[3].pidKi = 24000.0;
	pC->Joints[3].pidKd = 100.0;
	pC->Joints[3].pidErrorIntMin = -40.0;
	pC->Joints[3].pidErrorIntMax = 40.0;
	
	pC->Joints[4].pidKp = 4000.0;
	pC->Joints[4].pidKi = 24000.0;
	pC->Joints[4].pidKd = 100.0;
	pC->Joints[4].pidErrorIntMin = -40.0;
	pC->Joints[4].pidErrorIntMax = 40.0;
	
	pC->Joints[5].pidKp = 4000.0;
	pC->Joints[5].pidKi = 24000.0;
	pC->Joints[5].pidKd = 100.0;
	pC->Joints[5].pidErrorIntMin = -40.0;
	pC->Joints[5].pidErrorIntMax = 40.0;
}
void Joints_SetStartValuesVariables(void)
{
	for(int num=0;num<JOINTS_MAX;num++)
	{
		pC->Joints[num].flagFirstPosRead = false;
		pC->Joints[num].flagConfirmChangeConf = false;
		pC->Joints[num].cWPosNotAccurate = true;
		pC->Joints[num].currentMode = Joint_M_Null;
		pC->Joints[num].targetMode = Joint_M_Torque;
		pC->Joints[num].confFun = 0x07; //[0x01 - wlaczenie ograniczenia zakresu pracy, 0x02 - wlaczenie MA730, 0x04 - obsluga safety]
		
		pC->Joints[num].flagDeparkPosAchieved = false;
		pC->Joints[num].deparkDist = 0.0;
		
		pC->Joints[num].setPos = 0.0;
		pC->Joints[num].setVel = 0.0;
		pC->Joints[num].setAcc = 0.0;
		pC->Joints[num].setTorque = 0.0;
		
		pC->Joints[num].limitPosMin = -M_PI;
		pC->Joints[num].limitPosMax = M_PI;
//		pC->Joints[num].limitVelMin = -M_2_PI;
//		pC->Joints[num].limitVelMax = M_2_PI;
		pC->Joints[num].limitVelMin = -2.0;
		pC->Joints[num].limitVelMax = 2.0;
		pC->Joints[num].limitAccMin = -M_4_PI;
		pC->Joints[num].limitAccMax = M_4_PI;
		pC->Joints[num].limitTorqueMin = -360.0;
		pC->Joints[num].limitTorqueMax = 360.0;
		pC->Joints[num].limitTempMin = 0.0;
		pC->Joints[num].limitTempMax = 255.0;
		pC->Joints[num].limitPosErrorMin = -0.09;
		pC->Joints[num].limitPosErrorMax = 0.09;
		
		pC->Joints[num].maxPosCom = M_PI;
//		pC->Joints[num].maxVelCom = M_2_PI;
		pC->Joints[num].maxVelCom = 2.0;
		pC->Joints[num].maxAccCom = M_4_PI;
		pC->Joints[num].maxTorqueCom = 360.0;
		
		pC->Joints[num].fricTorque = 0.0;
		
		pC->Joints[num].idSetPos = 0.0;
		pC->Joints[num].idSetVel = 0.0;
		pC->Joints[num].idSetAcc = 0.0;
		pC->Joints[num].idTorque = 0.0;
		
		pC->Joints[num].pidDt = 0.001;
		pC->Joints[num].pidErrorCurrent = 0.0;
		pC->Joints[num].pidErrorMeanCurrent = 0.0;
		pC->Joints[num].pidErrorMeanPrev = 0.0;
		pC->Joints[num].pidErrorBufIdx = 0;
		for(uint32_t i=0;i<JOINTS_PIDBUFMAX;i++)
			pC->Joints[num].pidErrorBuf[i] = 0.0;
		pC->Joints[num].pidErrorDiv = 0.0;
		pC->Joints[num].pidErrorInt = 0.0;
		pC->Joints[num].pidTorque = 0.0;
		
		pC->Joints[num].irIsRun = false;
		pC->Joints[num].irMaxTorque = 20.0;
		pC->Joints[num].irDt = 0.001;
		pC->Joints[num].irCurrentTorque = 0.0;
		pC->Joints[num].irTargetTorque = 0.0;
		pC->Joints[num].irErrorTorque = 0.0;
		pC->Joints[num].irHyst = 0.2;
		pC->Joints[num].irRampTorque = 1.0;	//Unit: Nm/sek
	}
	
	pC->Joints[1].deparkDist = -0.05236;
}
void Joints_SetResetValuesVariables(uint8_t num)
{
	pC->Joints[num].flagFirstPosRead = false;
	pC->Joints[num].flagConfirmChangeConf = false;
	pC->Joints[num].cWPosNotAccurate = true;
	pC->Joints[num].currentMode = Joint_M_Null;
	pC->Joints[num].targetMode = Joint_M_Torque;
	pC->Joints[num].currentFsm = Joint_FSM_Start;
	pC->Joints[num].targetFsm = Joint_FSM_Init;
	
	pC->Joints[num].setPos = 0.0;
	pC->Joints[num].setVel = 0.0;
	pC->Joints[num].setAcc = 0.0;
	pC->Joints[num].setTorque = 0.0;
	
	pC->Joints[num].fricTorque = 0.0;
	
	pC->Joints[num].idSetPos = 0.0;
	pC->Joints[num].idSetVel = 0.0;
	pC->Joints[num].idSetAcc = 0.0;
	pC->Joints[num].idTorque = 0.0;
	
	pC->Joints[num].pidErrorCurrent = 0.0;
	pC->Joints[num].pidErrorMeanCurrent = 0.0;
	pC->Joints[num].pidErrorMeanPrev = 0.0;
	pC->Joints[num].pidErrorBufIdx = 0;
	for(uint32_t i=0;i<JOINTS_PIDBUFMAX;i++)
		pC->Joints[num].pidErrorBuf[i] = 0.0;
	pC->Joints[num].pidErrorDiv = 0.0;
	pC->Joints[num].pidErrorInt = 0.0;
	pC->Joints[num].pidTorque = 0.0;
	
	pC->Joints[num].irIsRun = false;
	pC->Joints[num].irCurrentTorque = 0.0;
	pC->Joints[num].irTargetTorque = 0.0;
	pC->Joints[num].irErrorTorque = 0.0;
}
void Joints_StartIrValuesVariables(uint8_t num, double targetPos)
{
	pC->Joints[num].irIsRun = true;
	
	pC->Joints[num].irTargetPos = targetPos;
	
	if(pC->Joints[num].currentPos > pC->Joints[num].irTargetPos)
		pC->Joints[num].irTargetTorque = -pC->Joints[num].irMaxTorque;
	else
		pC->Joints[num].irTargetTorque = pC->Joints[num].irMaxTorque;
	
	pC->Joints[num].irCurrentTorque = 0.0;
	pC->Joints[num].irErrorTorque = 0.0;
}
void Joints_StopIrValuesVariables(uint8_t num)
{
	pC->Joints[num].irIsRun = false;
	pC->Joints[num].irTargetTorque = 0.0;
	pC->Joints[num].irCurrentTorque = 0.0;
	pC->Joints[num].irErrorTorque = 0.0;
}
void Joints_SetDefaultVariables(void)
{
	for(int num=0;num<JOINTS_MAX;num++)
	{
		pC->Joints[num].setPos = 0.0;
		pC->Joints[num].setVel = 0.0;
		pC->Joints[num].setAcc = 0.0;
		pC->Joints[num].setTorque = 0.0;
		
		pC->Joints[num].fricTorque = 0.0;
		
		pC->Joints[num].idSetPos = 0.0;
		pC->Joints[num].idSetVel = 0.0;
		pC->Joints[num].idSetAcc = 0.0;
		pC->Joints[num].idTorque = 0.0;
		
		pC->Joints[num].pidErrorCurrent = 0.0;
		pC->Joints[num].pidErrorMeanCurrent = 0.0;
		pC->Joints[num].pidErrorMeanPrev = 0.0;
		pC->Joints[num].pidErrorBufIdx = 0;
		for(uint32_t i=0;i<JOINTS_PIDBUFMAX;i++)
			pC->Joints[num].pidErrorBuf[i] = 0.0;
		pC->Joints[num].pidErrorDiv = 0.0;
		pC->Joints[num].pidErrorInt = 0.0;
		pC->Joints[num].pidTorque = 0.0;
	}
}
static void Joints_CalcFrictionCompensateTable(void)
{
	for(int num=0;num<JOINTS_MAX;num++)
	{
		pC->Joints[num].flagFricTableValueOverlimit = false;
		
		if(pC->Joints[num].currentVel < pC->Joints[num].fricTableVelMin)
		{
			pC->Joints[num].flagFricTableValueOverlimit = true;
			return;
		}
		if(pC->Joints[num].currentVel > pC->Joints[num].fricTableVelMax)
		{
			pC->Joints[num].flagFricTableValueOverlimit = true;
			return;
		}
		if(pC->Joints[num].currentBearingTemp < pC->Joints[num].fricTableTempMin)
		{
			pC->Joints[num].flagFricTableValueOverlimit = true;
			return;
		}
		if(pC->Joints[num].currentBearingTemp > pC->Joints[num].fricTableTempMax)
		{
			pC->Joints[num].flagFricTableValueOverlimit = true;
			return;
		}
		
		//znajdowanie wartosci w tablicy przy zalozeniu, ze predkosc i temperatura sa posortowane od najmniejszych do najwiekszych
		int v0idx = JOINTS_FRICTABVELSIZE, v1idx = JOINTS_FRICTABVELSIZE;
		int t0idx = JOINTS_FRICTABTEMPSIZE, t1idx = JOINTS_FRICTABTEMPSIZE;
		double M[2][2];
		for(int i=0;i<JOINTS_FRICTABVELSIZE - 1;i++)
		{
			if(pC->Joints[num].currentVel > pC->Joints[num].fricTableVelIdx[i] && pC->Joints[num].currentVel < pC->Joints[num].fricTableVelIdx[i+1])
			{
				v0idx = i;
				v1idx = i+1;
				break;
			}
		}
		for(int i=0;i<JOINTS_FRICTABTEMPSIZE - 1;i++)
		{
			if(pC->Joints[num].currentBearingTemp > pC->Joints[num].fricTableTempIdx[i] && pC->Joints[num].currentBearingTemp < pC->Joints[num].fricTableTempIdx[i+1])
			{
				t0idx = i;
				t1idx = i+1;
				break;
			}
		}
		if(v0idx >= JOINTS_FRICTABVELSIZE || v1idx >= JOINTS_FRICTABVELSIZE || t0idx >= JOINTS_FRICTABTEMPSIZE || t1idx >= JOINTS_FRICTABTEMPSIZE)
		{
			pC->Joints[num].flagFricTableValueOverlimit = true;
			return;
		}
		
		double v0 = pC->Joints[num].fricTableVelIdx[v0idx];
		double v1 = pC->Joints[num].fricTableVelIdx[v1idx];
		double t0 = pC->Joints[num].fricTableTempIdx[t0idx];
		double t1 = pC->Joints[num].fricTableTempIdx[t1idx];
		M[0][0] = pC->Joints[num].fricTable[v0idx][t0idx];
		M[0][1] = pC->Joints[num].fricTable[v0idx][t1idx];
		M[1][0] = pC->Joints[num].fricTable[v1idx][t1idx];
		M[1][1] = pC->Joints[num].fricTable[v1idx][t1idx];
		
		double vaRatio = (M[0][1] - M[0][0]) / fabs(v1 - v0);
		double vbRatio = (M[1][1] - M[1][0]) / fabs(v1 - v0);
		double Mva = vaRatio * (pC->Joints[num].currentVel - v0) + M[0][0];
		double Mvb = vbRatio * (pC->Joints[num].currentVel - v0) + M[1][0];
		
		double tRatio = (Mvb - Mva) / fabs(t1 - t0);
		
		pC->Joints[num].fricTorque = tRatio * (pC->Joints[num].currentBearingTemp - t0) + Mva;
	}
}
static void Joints_CalcFrictionCompensatePolynomial(void)
{
	for(uint8_t num=0;num<JOINTS_MAX;num++)
	{
		double vel = pC->Joints[num].setVelTemp;
		double t = pC->Joints[num].currentBearingTemp;
		double coeffs[JOINTS_FRICCOEFFMAX];
		for(int i=0;i<JOINTS_FRICCOEFFMAX;i++)
			coeffs[i] = pC->Joints[num].fricCoeff[i];
			
		pC->Joints[num].fricTorque = (1+coeffs[4]*(t-coeffs[5]))*(coeffs[0] * ((vel > 0) - (vel < 0)) + coeffs[1] * vel + coeffs[2] * pow(vel, 2) * ((vel > 0) - (vel < 0)) + coeffs[3] * pow(vel, 3));
	}
}
void Joints_CalcFrictionCompensate(void)
{
	if(pC->Jtc.fricType == JTC_FT_Polynomial)
		Joints_CalcFrictionCompensatePolynomial();
	else if(pC->Jtc.fricType == JTC_FT_Table)
		Joints_CalcFrictionCompensateTable();
}
void Joints_CalcPIDs(void)
{
	// num = numer jointa
	// pidDt - podstawa czasu = 0.001 (s)
	// setPos - pozycja zadana (rad)
	// currentPos - pozycja aktualna (rad)
	// pidErrorPrev - uchyb poprzedni (rad)
	// pidErrorCurrent - uchyb aktualny (rad)
	// pidErrorDiv - pochodna uchybu (rad/s)
	// pidErrorInt - calka uchybu (rad*s)
	// pidErrorIntMin - minimalna wartosc calki uchybu (do saturacji calki) (rad*s)
	// pidErrorIntMax - maksymalna wartosc calki uchybu (do saturacji calki) (rad*s)
	// pidOut - wyjscie regulatora (Nm)
	// pidKp - wspólczynnik kp (Nm/rad)
	// pidKi - wspólczynnik ki (Nm/(rad*s))
	// pidKd - wspólczynnik kd (Nm/(rad/s))
	
	for(int num=0;num<JOINTS_MAX;num++)
	{
		// uchyb regulacji
		pC->Joints[num].pidErrorCurrent = pC->Joints[num].setPosTemp - pC->Joints[num].currentPos;

		// pochodna uchybu liczona jakos wartosc srednia z uchybów z ostatnich JOINTS_PIDBUFMAX kroków czasowych
		pC->Joints[num].pidErrorBuf[pC->Joints[num].pidErrorBufIdx] = pC->Joints[num].pidErrorCurrent;
		pC->Joints[num].pidErrorBufIdx = (pC->Joints[num].pidErrorBufIdx + 1) % JOINTS_PIDBUFMAX;
		pC->Joints[num].pidErrorMeanPrev = pC->Joints[num].pidErrorMeanCurrent;
		pC->Joints[num].pidErrorMeanCurrent = 0.0;
		for(uint32_t j=0;j<JOINTS_PIDBUFMAX;j++)
			pC->Joints[num].pidErrorMeanCurrent += pC->Joints[num].pidErrorBuf[j];
		pC->Joints[num].pidErrorMeanCurrent /= (double)JOINTS_PIDBUFMAX;
		pC->Joints[num].pidErrorDiv = (pC->Joints[num].pidErrorMeanCurrent - pC->Joints[num].pidErrorMeanPrev) / pC->Joints[num].pidDt; 
		
		//calka uchybu i saturacja calki uchybu
		pC->Joints[num].pidErrorInt += pC->Joints[num].pidErrorCurrent * pC->Joints[num].pidDt;	
		if(pC->Joints[num].pidErrorInt < pC->Joints[num].pidErrorIntMin) 
			pC->Joints[num].pidErrorInt = pC->Joints[num].pidErrorIntMin;
		if(pC->Joints[num].pidErrorInt > pC->Joints[num].pidErrorIntMax)
			pC->Joints[num].pidErrorInt = pC->Joints[num].pidErrorIntMax;
		
		//wyjscie z regulatora
		pC->Joints[num].pidTorqueP = pC->Joints[num].pidKp * pC->Joints[num].pidErrorCurrent;
		pC->Joints[num].pidTorqueI = pC->Joints[num].pidKi * pC->Joints[num].pidErrorInt;
		pC->Joints[num].pidTorqueD = pC->Joints[num].pidKd * pC->Joints[num].pidErrorDiv;
		pC->Joints[num].pidTorque = pC->Joints[num].pidTorqueP + pC->Joints[num].pidTorqueI + pC->Joints[num].pidTorqueD;
	}
}
void Joints_CalcInitRegsTorque(void)
{
	for(int num=0;num<JOINTS_MAX;num++)
	{
		if(pC->Joints[num].irIsRun == true)
		{
			pC->Joints[num].irErrorTorque = pC->Joints[num].irTargetTorque - pC->Joints[num].irCurrentTorque;
			
			if(pC->Joints[num].irErrorTorque < -pC->Joints[num].irHyst)
				pC->Joints[num].irCurrentTorque -= pC->Joints[num].irRampTorque * pC->Joints[num].irDt;
			if(pC->Joints[num].irErrorTorque > pC->Joints[num].irHyst)
				pC->Joints[num].irCurrentTorque += pC->Joints[num].irRampTorque * pC->Joints[num].irDt;
		}
		else
		{
			Joints_StopIrValuesVariables(num);
		}
	}
}
